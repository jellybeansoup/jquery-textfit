/**
* TextFit
*
* Automatically size a textarea to fit it's content as you type.
* Requires jQuery.
*
* @version 1.2
* @category Form helper
* @author Daniel Farrelly <daniel@jellystyle.com>
* @link <https://github.com/jellybeansoup/jquery-textfit>
*/
!function(a){
/**
	* The textfit function (an alias for $.textfit._init).
	* Works with a jQuery object array.
	* @var function
	*/
a.fn.textfit=function(){
// Loop through each object
a(this).each(function(){
// Set up the widget
var t;
// Instatniate the widget
return{
/**
				* The DOM elements that make up the widget
				* @var object
				*/
_dom:{textarea:null,dummy:null},
/**
				* The properties for this instance of the textfit widget
				* @var object
				*/
_properties:{length:0,min:null,max:null},
/**
				* The interval used to track changes to the textarea's content
				* @var object
				*/
_value:null,
/**
				* Initiate the textfit functionality on a given DOM object.
				* @param object object The jQuery DOM object.
				* @return void
				*/
init:function(t){var n=this;
// Fetch the object
n._dom.textarea=a(t),
// Set the minimum height
n._properties.min=n._dom.textarea.height(),n._properties.max="none"!==n._dom.textarea.css("max-height")?n._dom.textarea.css("max-height"):null,
// Create a dummy element
n._dom.dummy=a("<div />").addClass("textfit-dummy").appendTo("body");
// Copy styles to the dummy element
var e=["width","font-family","font-size","font-weight","line-height","word-wrap","white-space","padding-top","padding-bottom","padding-left","padding-right","border-top","border-bottom","border-left","border-right","-moz-box-sizing","-webkit-box-sizing","box-sizing"],i={position:"absolute",top:"-1000000px",left:"-1000000px",width:n._dom.textarea.width()};for(var o in e){var r=e[o];i[r]=n._dom.textarea.css(r)}n._dom.dummy.css(i),
// Resize the textarea based on the initial content
n._dom.textarea.css({overflow:"hidden",height:n._properties.min,resize:"none"}),
// Resize when the text changes
n._dom.textarea.on("keyup change",n,function(t){t.data._fitToContent()}),n._dom.textarea.on("cut paste input",n,function(t){
// This interval makes the adjustment kick in as soon as the content changes
var e=setInterval(function(){
// If the content hasn't changed, we do nothing.
n._content()!==n._value&&(
// Destory the interval
clearInterval(e),
// Fit to the content
t.data._fitToContent())},1)}),
// Set the starting size
setTimeout(function(){var t=n._determineSize();n._dom.textarea.height()!==t&&n._dom.textarea.css({height:t})},50)},
/**
				* Size the element to fit it's content.
				* @return void
				*/
_content:function(){var t;return this._dom.textarea.val().replace(/[\u00A0-\u9999<>\&]/gim,function(t){return"&#"+t.charCodeAt(0)+";"})},
/**
				* Size the element to fit it's content.
				* @return void
				*/
_fitToContent:function(){var t=this;
// If the content hasn't changed, we do nothing.
if(t._content()!==t._value){
// Store the value so we know not to do this again
t._value=t._content();
// Determine the size of the updated content
var e=t._determineSize(),n;if(t._dom.textarea.height()!==e)t._dom.textarea.stop(),-1<t._content().length-t._properties.length?t._dom.textarea.css({height:e}):t._dom.textarea.animate({height:e},100);
// Update the length
t._properties.length=t._content().length}},
/**
				* Determine the height of the text.
				* @return void
				*/
_determineSize:function(){var t=this;
// Copy the text to the dummy element
t._dom.dummy.html(t._content().replace(/\n/gi,"&nbsp;<br/>")+"<br/>&nbsp;"),t._dom.dummy.css({width:t._dom.textarea.width()});
// Get the height and try to match the box sizing
var e=t._dom.dummy.height();
// Default to the min and max heights
return"border-box"===t._dom.textarea.css("box-sizing")&&(e=t._dom.dummy.outerHeight(!0)),null!==t._properties.min&&e<t._properties.min?t._properties.min:null!==t._properties.max&&e>t._properties.max?t._properties.max:e},
/**
				* The version number of this plugin
				* @var string
				*/
_version:"1.2"}.init(this)})}}(jQuery),
/**
* Apply automatically to all textarea elements on load.
*/
function(){var t=jQuery,e=document.getElementsByTagName("script");-1<e[e.length-1].src.indexOf("?auto")&&t().ready(function(){t("textarea").textfit()})}();